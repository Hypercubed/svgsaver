{"version":3,"sources":["../src/saveuri.js"],"names":[],"mappings":";;;;;;;;qBAAoC,SAAS;;AAG7C,IAAI,wBAAwB,GAAG,AAAC,OAAO,QAAQ,KAAK,WAAW,IAAM,UAAU,IAAI,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,AAAC,CAAC;;AAEzG,SAAS,OAAO,CAAC,GAAG,EAAE,IAAI,EAAC;;AAEhC,MAAI,sBAAU,MAAM,CAAC,MAAM,CAAC,IAAI,uBAAW,IAAI,CAAC,EAAE;AAChD,WAAO,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;GACvC,MAAM;AACL,QAAI,wBAAwB,EAAE;AAC5B,UAAI,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;AACrC,QAAE,CAAC,YAAY,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;AAC7B,QAAE,CAAC,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AAClC,QAAE,CAAC,KAAK,EAAE,CAAC;AACb,aAAO,IAAI,CAAC;KACX,MAAM,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;AACxC,YAAM,CAAC,IAAI,CAAC,GAAG,EAAE,QAAQ,EAAE,EAAE,CAAC,CAAC;AACjC,aAAO,IAAI,CAAC;KACZ;GACD;;AAED,SAAO,KAAK,CAAC;CACd;;AAEM,SAAS,OAAO,CAAC,GAAG,EAAE,IAAI,EAAC;AAChC,MAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AAC9C,MAAI,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;;AAEtC,MAAI,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;AACxB,OAAK,CAAC,MAAM,GAAG,YAAW;AACxB,UAAM,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;AAC3B,UAAM,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;AAC7B,WAAO,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;;AAE/B,QAAI,sBAAU,MAAM,CAAC,MAAM,CAAC,IAAI,sBAAU,MAAM,CAAC,MAAM,CAAC,EAAE;AACxD,YAAM,CAAC,MAAM,CAAC,UAAS,IAAI,EAAE;AAC3B,cAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;OACpB,CAAC,CAAC;KACJ,MAAM;AACL,UAAI,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;AACxC,aAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;KACpB;GAEF,CAAC;AACF,OAAK,CAAC,GAAG,GAAG,GAAG,CAAC;AAChB,SAAO,IAAI,CAAC;CACb","file":"saveuri.js","sourcesContent":["import {isDefined, isFunction} from './utils';\r\n\r\n//detection\r\nvar DownloadAttributeSupport = (typeof document !== 'undefined') && ('download' in document.createElement('a'));\r\n\r\nexport function saveUri(uri, name){\r\n\r\n  if (isDefined(window.saveAs) && isFunction(Blob)) {\r\n    return saveAs(this.getBlob(el), name);\r\n  } else {\r\n    if (DownloadAttributeSupport) {\r\n      var dl = document.createElement('a');\r\n      dl.setAttribute('href', uri);\r\n      dl.setAttribute('download', name);\r\n      dl.click();\r\n  \t\treturn true;\r\n    } else if (typeof window !== 'undefined') {\r\n      window.open(uri, '_blank', '');\r\n  \t\treturn true;\r\n  \t}\r\n  }\r\n  \r\n  return false;\r\n}\r\n\r\nexport function savePng(uri, name){\r\n  var canvas = document.createElement('canvas');\r\n  var context = canvas.getContext('2d');\r\n\r\n  var image = new Image();\r\n  image.onload = function() {\r\n    canvas.width = image.width;\r\n    canvas.height = image.height;\r\n    context.drawImage(image, 0, 0);\r\n\r\n    if (isDefined(window.saveAs) && isDefined(canvas.toBlob)) {\r\n      canvas.toBlob(function(blob) {\r\n        saveAs(blob, name);\r\n      });\r\n    } else {\r\n      var uri = canvas.toDataURL('image/png');\r\n      saveUri(uri, name);\r\n    }\r\n\r\n  };\r\n  image.src = uri;\r\n  return true;\r\n}\r\n"]}