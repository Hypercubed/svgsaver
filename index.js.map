{"version":3,"sources":["src/svgsaver.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import saveAs from 'FileSaver';\n\n//function isString(value) {return typeof value === 'string';}\nfunction isUndefined(value) {return typeof value === 'undefined';}\nfunction isDefined(value) {return typeof value !== 'undefined';}\n\nvar forEach = Array.prototype.forEach;\n\nvar svgStyles = {   // Whitelist of CSS stylkes and default values\n  'alignment-baseline':'auto',\n  'baseline-shift':'baseline',\n  'clip':'auto',\n  'clip-path':'none',\n  'clip-rule':'nonzero',\n  'color':'rgb(51, 51, 51)',\n  'color-interpolation':'srgb',\n  'color-interpolation-filters':'linearrgb',\n  'color-profile':'auto',\n  'color-rendering':'auto',\n  'cursor':'auto',\n  'direction':'ltr',\n  'display':'inline',\n  'dominant-baseline':'auto',\n  'enable-background':'',\n  'fill':'rgb(0, 0, 0)',\n  'fill-opacity':'1',\n  'fill-rule':'nonzero',\n  'filter':'none',\n  'flood-color':'rgb(0, 0, 0)',\n  'flood-opacity':'1',\n  'font':'',\n  'font-family':'normal',\n  'font-size':'medium',\n  'font-size-adjust':'auto',\n  'font-stretch':'normal',\n  'font-style':'normal',\n  'font-variant':'normal',\n  'font-weight':'400',\n  'glyph-orientation-horizontal':'0deg',\n  'glyph-orientation-vertical':'auto',\n  'image-rendering':'auto',\n  'kerning':'auto',\n  'letter-spacing':'0',\n  'lighting-color':'rgb(255, 255, 255)',\n  'marker':'',\n  'marker-end':'none',\n  'marker-mid':'none',\n  'marker-start':'none',\n  'mask':'none',\n  'opacity':'1',\n  'overflow':'visible',\n  'paint-order': 'normal',\n  'pointer-events':'auto',\n  'shape-rendering':'auto',\n  'stop-color':'rgb(0, 0, 0)',\n  'stop-opacity':'1',\n  'stroke':'none',\n  'stroke-dasharray':'none',\n  'stroke-dashoffset':'0',\n  'stroke-linecap':'butt',\n  'stroke-linejoin':'miter',\n  'stroke-miterlimit':'4',\n  'stroke-opacity':'1',\n  'stroke-width':'1',\n  'text-anchor':'start',\n  'text-decoration':'none',\n  'text-rendering':'auto',\n  'unicode-bidi':'normal',\n  'visibility':'visible',\n  'word-spacing':'0px',\n  'writing-mode':'lr-tb'\n};\n\nvar svgAttrs = [  // white list of attributes\n  'id', 'xml:base', 'xml:lang', 'xml:space', // Core\n  'height', 'result', 'width', 'x', 'y',     // Primitive\n  'xlink:href',                              // Xlink attribute\n  'style','class',\n  'd','pathLength',                          // Path\n  'x','y','dx','dy','glyphRef','format',\n  'x1','y1','x2','y2',\n  'rotate','textLength',\n  'cx','cy','r',\n  'rx','ry',\n  'fx','fy',\n  'width','height',\n  'refX','refY','orient',\n  'markerUnits','markerWidth','markerHeight',\n  'maskUnits',\n  'transform',\n  'viewBox','version',                      // Container\n  'preserveAspectRatio','xmlns',\n  'points',                                 // Polygons\n  'offset'\n];\n\n// adapted from https://github.com/angular/angular.js/issues/2866#issuecomment-31012434\nfunction getStyles(node, name) {\n  var val;\n\n  if (isDefined(node.currentStyle)) {  //for old IE\n    val = node.currentStyle[name];\n  } else if (isDefined(window.getComputedStyle)){  //for modern browsers\n    val = node.ownerDocument.defaultView.getComputedStyle(node,null)[name];\n  } else {\n    val = node.style[name];\n  }\n  return  (val === '') ? undefined : val;\n}\n\nfunction copyStyles(source, target) {\n  for (var key in svgStyles) {\n    var _default = svgStyles[key];\n    var src = getStyles(source,key);\n    //var tgt = getStyles(target,key);\n    var par = getStyles(target.parentNode,key);\n    if (src && src !== _default /* &&  src !== tgt */ && src !== par  ) {\n      target.style[key] = src;\n    }\n  }\n}\n\nfunction cleanAttrs(el) {\n  forEach.call(el.attributes, function(attr) {\n    // remove if it is not style nor on whitelist\n    // keeping attributes that are also styles because some styles are not copied\n    if(attr.specified && isUndefined(svgStyles[attr.name]) && svgAttrs.indexOf(attr.name) < 0) {\n      el.removeAttribute(attr.name);\n    }\n  });\n}\n\nfunction cloneSvg(src) {\n  var clonedSvg = src.cloneNode(true);\n  var srcChildren = src.querySelectorAll('*');\n\n  forEach.call(clonedSvg.querySelectorAll('*'), function( target, index ){\n    copyStyles(srcChildren[index], target);\n    cleanAttrs(target);\n  });\n\n  return clonedSvg;\n}\n\nclass SvgSaver {\n  constructor(el) {\n    // check for Blob and FileSaver\n\n    this.el = el;\n  }\n\n  getHTML() {\n    var svg = cloneSvg(this.el);\n\n    svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n    svg.setAttribute('version', 1.1);\n\n    return svg.outerHTML || (new window.XMLSerializer()).serializeToString(svg);\n  }\n\n  getBlob() {\n    var html = this.getHTML();\n    return new Blob([html], { type: 'text/xml' });\n  }\n\n  asSvg(filename) {\n    if (!filename || filename === '') {\n      filename = this.el.getAttribute('title');\n      filename = (filename || 'untitled')+'.svg';\n    }\n\n    return saveAs(this.getBlob(), filename);\n  }\n\n}\n\nexport default SvgSaver;\n"]}